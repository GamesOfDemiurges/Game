<!DOCTYPE html>
<!--[if IE 8]>         <html class="js ie8"> <![endif]-->
<!--[if IE 9]>         <html class="js ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="js"> <!--<![endif]-->
	<head>
		<title>Игры Демиургов</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=no"/>

		<!--<link rel="stylesheet" type="text/css" href="css/style.css" media="screen, projection, print">
		<script type="text/javascript" src="js/main.js"></script> -->

		<style type="text/css">
			/* canvas { -webkit-transform: scale3d(2, 2, 0) translate3d(200px, 110px, 0); }		*/

			html {
				margin: 0;
				padding: 0;
				height: 100%;
			}

			body {
				margin: 0;
				padding: 0;
				height: 100%;
				position: relative;
			}

			canvas {
				display: block;
				position: relative;
				height: 100%;
				width: 100%;
			}
		</style>

		<script type="text/javascript" src="engine/spine-runtime/pixi/bin/pixi.dev.js"></script>
		<script type="text/javascript" src="engine/scene.js"></script>
		<script type="text/javascript" src="engine/object.js"></script>

		<script type="text/javascript">
			window.onload = function() {

				var assetsToLoader = [
					"assets/models/spineboy/spineboy.json",
					"assets/models/spineboy/spineboy.anim",

					"assets/models/dragon/dragon.json",
					"assets/models/dragon/dragon.anim",

					"assets/models/goblins/images/goblin/goblin.json",
					"assets/models/goblins/images/goblin/goblin.anim",

					"assets/background/lvl1_1.png"
				];

				//	"assets/models/goblins/images/goblin/goblin.json",
				//	"assets/models/goblins/images/goblin/goblin.anim",

				// create a new loader
				var loader = new PIXI.AssetLoader(assetsToLoader);

				// use callback
				loader.onComplete = function() {
					console.log('loaded');


					var obj1 = obj().create({
							image: 'assets/background/lvl1_1.png',
							x: 0,
							y: 0
						});

					var obj2 = obj().create({
							image: 'assets/models/spineboy/spineboy.anim',
							x: 600,
							y: 400
						});

					var obj3 = obj().create({
							image: 'assets/models/dragon/dragon.anim',
							x: 400,
							y: 700
						});

					var obj4 = obj().create({
							image: 'assets/models/goblins/images/goblin/goblin.anim',
							x: 300,
							y: 300
						});

					scene
						.init({
							canvasId: 'view'
						})
						.addObj(obj1)
						.addObj(obj2)
						.addObj(obj3)
						.addObj(obj4);


					function swapZ(Zarray) {
						var p1 = Zarray.getChildAt(0);
						var p2 = Zarray.getChildAt(1);

						//console.log(p1, p2);

						Zarray.removeChild(p1);
						Zarray.removeChild(p2);

						Zarray.addChild(p2);
						Zarray.addChild(p1);

						/*Zarray[0] = p2;
						Zarray[1] = p1; */

						//Zarray.swapChildren(0, 1);

						//console.log(Zarray.children);


					}

					setInterval(function() {
						//swapZ( scene.playGround);
					}, 2000)

				}

				//begin load
				loader.load();

			}
		</script>

	</head>
	<body>
		<canvas id="view"></canvas>
	</body>
</html>